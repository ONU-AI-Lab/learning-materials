---
id: list-comprehension
title: List comprehension
sidebar_label: Списочные выражения
---


`List comprehension` трудно перевести правильно на русский, потому, раз он генерирует новый список, будем называть его просто генератором списков. Это одна из самых приятных вещей в python, научившись писать которую, будешь применять её везде. Как это выглядит? Пожалуй Вы точно видели записи такого вида:
```python
squares = [x ** 2 for x in range(10)]
print(squares)# [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
```
Это и есть генератор списка, результатом которого будет список квадратов последовательности `0..9`. Что здесь происходит? Это обычный цикл `for`, только записан в удобочитаемом виде, в развёрнутом виде это выглядело бы так:

```python
squares = []
for x in range(10):
  squares.append(x ** 2)

print(squares) # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
```

Вот тут и видна разница в этих записях — генератор списка условно можно назвать *синтаксическим сахаром* для цикла `for`, но у них разное время выполнения. Под капотом генератор списка также использует цикл `for` но выигрывает по скорости из-за того, то не вызывает метод `append` у списка. Так же как и в обычных циклах в генераторах можно применять условия:
```python
odds = [x for x in range(10) if x % 2 != 0]
print(odds) # [1, 3, 5, 7, 9]
```

если в условии нужен `else`, то всё условие пишется до `for`:
```python
a = [x ** 2 if x % 2 == 0 else x ** 3 for x in range(10)]
print(a) # [0, 1, 4, 27, 16, 125, 36, 343, 64, 729]
```
Гораздо удобнее итерироваться по двум спискам:
```python
# Две абсолютно одинаковые программы 
first = []
for x in range(1, 5):
  for y in range(5, 1, -1):
    if x != y:
      first.append((x, y))
      
second = [(x, y) for x in range(1, 5) for y in range(5, 1, -1) if x != y]

print(first == second) # True
```
